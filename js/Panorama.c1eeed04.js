"use strict";(self["webpackChunkcreation_gallery"]=self["webpackChunkcreation_gallery"]||[]).push([[243],{55122:function(e,t,n){n.d(t,{XF:function(){return c},RI:function(){return a},hj:function(){return o},Kn:function(){return r},nK:function(){return s},HD:function(){return i},yM:function(){return d},c4:function(){return h}});n(10768);function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){if(r(e)){const t=Object.keys(e);return 0===t.length}return!1}function i(e){return"string"===typeof e}function o(e){return"number"===typeof e}function a(e){return"object"===typeof HTMLElement?e instanceof HTMLElement:e&&"object"===typeof e&&1===e.nodeType&&"string"===typeof e.nodeName}n(24919);function c(e=1,t=10){return Math.floor(Math.random()*(t-e+1))+e}function h(e,t=!0){if(""===e||0===e||!e)return"0";const n=e+"",r=n.indexOf(".");let s="",i="";-1!==r?(t&&(s=n.substring(r)),i=n.substring(0,r)):i=n;let o=i.split("");if(o.length>=4){const e=[],t=o.reverse();for(let n=0;n<t.length;n++)e.push(t[n]),(n+1)%3===0&&e.push(",");o=e.reverse(),o.length&&","===o[0]&&o.shift()}return o.join("")+(t?s:"")}function d(e,t=2){try{const n=parseFloat(e);return n.toFixed(t)}catch(n){return"0"}}},54040:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(10185),s=n(26954),i=n.n(s),o=n(77557),a=n(55122);const c={domId:"webgl-output",initPosition:new r.Pa4(20,10,10),fov:60,near:1,far:1e4,rendererOptions:{},clearColor:new r.Ilk(9737626),showStats:!1,helper:0,exposure:1,enableDamping:!0};class h{constructor(e){const t=c;(0,a.Kn)(e)&&Object.assign(t,e);const{fov:n,near:s,far:h,initPosition:d,rendererOptions:l={},clearColor:u,domId:p,showStats:m,helper:f,exposure:g,enableDamping:w}=t;this.scene=new r.xsS,this.camera=new r.cPb(n,window.innerWidth/window.innerHeight,s,h),this.camera.position.copy(d),this.camera.lookAt(this.scene.position);let b={antialias:!0};if((0,a.Kn)(l)&&(b=Object.assign({},b,l)),this.renderer=new r.CP7(b),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=r.ntZ,this.renderer.setClearColor(u),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.toneMapping=r.EoG,this.renderer.toneMappingExposure=g,this.renderer.physicallyCorrectLights=!0,this.renderer.setPixelRatio(window.devicePixelRatio),document.getElementById(p)?.append(this.renderer.domElement),this.orbitControls=new o.z(this.camera,this.renderer.domElement),this.orbitControls.enableDamping=w,this.clock=new r.SUY,(0,a.hj)(f)&&f>0&&this.scene.add(new r.y8_(f)),m){const e=new(i());this.stats=e,document.body.appendChild(e.dom)}}render(){this.orbitControls.update(),this.stats&&this.stats.update(),this.beforeRender&&this.beforeRender(),requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)}}},85315:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});n(10768);var r=n(4310),s=n(54040),i=n(10185);const o={id:"webgl-output"},a={name:"Panorama"};var c=Object.assign(a,{setup(e){class t extends s.Z{constructor(){super({initPosition:new i.Pa4(0,0,1),clearColor:new i.Ilk(0),fov:75,near:1,far:1e4});const e=["/images/panorama/cubemap/px.png","/images/panorama/cubemap/nx.png","/images/panorama/cubemap/py.png","/images/panorama/cubemap/ny.png","/images/panorama/cubemap/pz.png","/images/panorama/cubemap/nz.png"];this.list=[];const t=[],n=new i.dpR;e.map((e=>{const r=new i.vBJ({map:n.load(e)});t.push(r)}));var r=new i.DvJ(500,500,500),s=new i.Kj0(r,t);s.geometry.scale(-1,1,1),this.scene.add(s);const o=new i.xeV({map:n.load("/images/icon/position-fill.png")}),a=[{x:-5,y:-4,z:-14,content:"床"},{x:-20,y:-5,z:-9,content:"沙发"},{x:10,y:-6,z:12,content:"冰箱"}],c=(e,t,n,r)=>{const s=document.createElement("canvas");s.setAttribute("width","300px"),s.setAttribute("height","100px");const o=s.getContext("2d");o.fillStyle="#F4EA2A",o.font="40px Microsoft YaHei UI",o.lineWidth=4;const a=o.measureText(e);o.fillText(e,(s.width-a.width)/2,55);const c=new i.xEZ(s);c.needsUpdate=!0;const h=new i.xeV({map:c}),d=new i.jyi(h);return d.scale.set(6,2,1),d.position.set(t+3,n,r),console.log("sp",d,e,t,n+1,r),d};a.map((e=>{const{x:t,y:n,z:r,content:s}=e,a=new i.jyi(o);a.position.set(t,n,r),this.scene.add(a);const h=c(s,t,n,r);this.scene.add(h),this.list.push(a),this.list.push(h)})),this.raycaster=new i.iMs,this.mouse=new i.FM8,this._pointerMove=this.pointerMove.bind(this),this.renderer.domElement.addEventListener("mousemove",this._pointerMove),this.render()}pointerMove(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,console.log("mouse",this.mouse.x,this.mouse.y),this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.list);console.log("intersects.length",t.length),t.length&&console.log("intersects",t)}beforeRender(){this.labelRenderer&&this.labelRenderer.render(this.scene,this.camera)}}return(0,r.bv)((()=>{new t})),(e,t)=>((0,r.wg)(),(0,r.iD)("div",o))}}),h=n(1256);const d=(0,h.Z)(c,[["__scopeId","data-v-a1051a44"]]);var l=d}}]);