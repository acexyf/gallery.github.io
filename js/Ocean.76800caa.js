'use strict';const a16_0x2adaba=a16_0x28f6;(function(_0x15513f,_0x52ab49){const _0x718ee4=a16_0x28f6,_0x471d06=_0x15513f();while(!![]){try{const _0x29c97a=parseInt(_0x718ee4(0x1cd))/0x1*(-parseInt(_0x718ee4(0x1fa))/0x2)+-parseInt(_0x718ee4(0x195))/0x3+-parseInt(_0x718ee4(0x20e))/0x4*(parseInt(_0x718ee4(0x215))/0x5)+parseInt(_0x718ee4(0x1b5))/0x6*(-parseInt(_0x718ee4(0x1e9))/0x7)+parseInt(_0x718ee4(0x1ad))/0x8*(parseInt(_0x718ee4(0x1c2))/0x9)+-parseInt(_0x718ee4(0x198))/0xa*(parseInt(_0x718ee4(0x1ee))/0xb)+parseInt(_0x718ee4(0x192))/0xc*(parseInt(_0x718ee4(0x1ea))/0xd);if(_0x29c97a===_0x52ab49)break;else _0x471d06['push'](_0x471d06['shift']());}catch(_0x1fae0a){_0x471d06['push'](_0x471d06['shift']());}}}(a16_0x7a31,0xa28dc));(self[a16_0x2adaba(0x1d3)]=self[a16_0x2adaba(0x1d3)]||[])[a16_0x2adaba(0x21a)]([[0x13e3],{0xc3ee:function(_0x24cad0,_0xde1dcb,_0x5b6dbe){const _0x49acb7=a16_0x2adaba;_0x5b6dbe['r'](_0xde1dcb),_0x5b6dbe['d'](_0xde1dcb,{'default':function(){return _0x370326;}});var _0x1f83e2=_0x5b6dbe(0xe392),_0xd69134=_0x5b6dbe(0x12516),_0x2fd29a=_0x5b6dbe(0x29ac);class _0x293439 extends _0xd69134[_0x49acb7(0x1e6)]{constructor(){const _0x29dd15=_0x49acb7,_0x518ea9=_0x293439[_0x29dd15(0x191)],_0x48e845=new _0xd69134['BKk']({'name':_0x29dd15(0x191),'fragmentShader':_0x518ea9[_0x29dd15(0x1f4)],'vertexShader':_0x518ea9['vertexShader'],'uniforms':_0xd69134['LlO'][_0x29dd15(0x1db)](_0x518ea9[_0x29dd15(0x1fb)]),'side':_0xd69134['hsX'],'depthWrite':!0x1});super(new _0xd69134[(_0x29dd15(0x1bd))](0x1,0x1,0x1),_0x48e845),this[_0x29dd15(0x17f)]=!0x0;}}_0x293439['SkyShader']={'uniforms':{'turbidity':{'value':0x2},'rayleigh':{'value':0x1},'mieCoefficient':{'value':0.005},'mieDirectionalG':{'value':0.8},'sunPosition':{'value':new _0xd69134[(_0x49acb7(0x1a0))]()},'up':{'value':new _0xd69134[(_0x49acb7(0x1a0))](0x0,0x1,0x0)}},'vertexShader':_0x49acb7(0x21b),'fragmentShader':_0x49acb7(0x194)};var _0x53b9bb=_0x5b6dbe(0x1103e);class _0x5497f8{constructor(){const _0x321f3e=_0x49acb7;this[_0x321f3e(0x1b1)]=(0x0,_0x53b9bb['H7'])(),this['camera']=(0x0,_0x53b9bb['Gc'])(new _0xd69134[(_0x321f3e(0x1a0))](0x1e,0x1e,0x64),0x37,0x1,0x4e20),this[_0x321f3e(0x1ed)]=(0x0,_0x53b9bb['Ki'])(),this[_0x321f3e(0x1ed)]['physicallyCorrectLights']=!0x0,this[_0x321f3e(0x18e)]=(0x0,_0x53b9bb['ZN'])(this['camera'],this[_0x321f3e(0x1ed)],!0x1);const _0x3fdd77=new _0xd69134['o6l'](0x100),_0x40fa23=new _0xd69134[(_0x321f3e(0x1d0))](0x1,0xa,_0x3fdd77);this[_0x321f3e(0x1a1)]=_0x40fa23,this[_0x321f3e(0x1d9)]=(0x0,_0x53b9bb['_f'])(),this['clock']=(0x0,_0x53b9bb['$i'])(),this[_0x321f3e(0x185)](),this[_0x321f3e(0x18d)](),this[_0x321f3e(0x1f9)](),this['_resizeFn']=this[_0x321f3e(0x18a)][_0x321f3e(0x1e3)](this),window[_0x321f3e(0x1b8)](_0x321f3e(0x187),this[_0x321f3e(0x1b0)]),this['render']();}['initLight'](){const _0x2bb3c7=_0x49acb7;(0x0,_0x53b9bb['RJ'])(this['scene'],0xffffff,0x1);const _0x1e9b3e=new _0xd69134[(_0x2bb3c7(0x1da))](0xffffff,0x1);_0x1e9b3e['color']['setHSL'](0.1,0x1,0.95),_0x1e9b3e[_0x2bb3c7(0x1d6)][_0x2bb3c7(0x1c6)](-0x1,1.75,0x1),_0x1e9b3e[_0x2bb3c7(0x1d6)][_0x2bb3c7(0x1aa)](0x1e),this[_0x2bb3c7(0x213)]=_0x1e9b3e,this['scene'][_0x2bb3c7(0x1f1)](_0x1e9b3e);}[_0x49acb7(0x1f9)](){const _0x130c5f=_0x49acb7,_0x4e3c1a=this[_0x130c5f(0x1d9)][_0x130c5f(0x208)](_0x130c5f(0x204));_0x4e3c1a[_0x130c5f(0x1f1)](this[_0x130c5f(0x1c0)],'x',-0x64,0x64)[_0x130c5f(0x188)](0x1)[_0x130c5f(0x196)](this['updateSunPosition'][_0x130c5f(0x1e3)](this)),_0x4e3c1a[_0x130c5f(0x1f1)](this['sun'],'y',-0x64,0x64)[_0x130c5f(0x188)](0x1)['onChange'](this[_0x130c5f(0x209)]['bind'](this)),_0x4e3c1a[_0x130c5f(0x1f1)](this[_0x130c5f(0x1c0)],'z',-0x64,0x64)[_0x130c5f(0x188)](0x1)[_0x130c5f(0x196)](this[_0x130c5f(0x209)][_0x130c5f(0x1e3)](this));const _0x437b4d=this[_0x130c5f(0x1d9)][_0x130c5f(0x208)]('海水');this[_0x130c5f(0x1a9)]={'speed':0x1,'alpha':0x1,'distortionScale':0x14},_0x437b4d[_0x130c5f(0x1f1)](this['waterParams'],_0x130c5f(0x1bf),0x0,0xa)['name'](_0x130c5f(0x1be))[_0x130c5f(0x188)](0.1),_0x437b4d[_0x130c5f(0x1f1)](this['waterParams'],_0x130c5f(0x1fd),0x0,0x1)['onChange'](_0x3120f9=>{const _0x5beb2e=_0x130c5f;this[_0x5beb2e(0x1bb)]['material'][_0x5beb2e(0x1fb)][_0x5beb2e(0x1fd)][_0x5beb2e(0x1f0)]=_0x3120f9;}),_0x437b4d[_0x130c5f(0x1f1)](this[_0x130c5f(0x1a9)],_0x130c5f(0x1d8),0x0,0xf0,0.1)[_0x130c5f(0x1d4)](_0x130c5f(0x1e5))[_0x130c5f(0x196)](_0x3e8dbe=>{const _0x475631=_0x130c5f;this['water'][_0x475631(0x1f5)][_0x475631(0x1fb)][_0x475631(0x1d8)][_0x475631(0x1f0)]=_0x3e8dbe;});const _0xde8dfb=this[_0x130c5f(0x1d9)]['addFolder']('天空');this[_0x130c5f(0x1e2)]={'turbidity':0x1,'rayleigh':1.5},_0xde8dfb[_0x130c5f(0x1f1)](this[_0x130c5f(0x1e2)],_0x130c5f(0x1ff),0x0,0x64)[_0x130c5f(0x1d4)](_0x130c5f(0x1a7))[_0x130c5f(0x196)](_0x32896b=>{const _0x2d89fd=_0x130c5f;this[_0x2d89fd(0x1e7)][_0x2d89fd(0x1f5)][_0x2d89fd(0x1fb)][_0x2d89fd(0x1ff)][_0x2d89fd(0x1f0)]=_0x32896b;}),_0xde8dfb[_0x130c5f(0x1f1)](this[_0x130c5f(0x1e2)],_0x130c5f(0x206),0x0,0x64)['name']('锐利值')['onChange'](_0x51dd6d=>{const _0x3db952=_0x130c5f;this[_0x3db952(0x1e7)][_0x3db952(0x1f5)][_0x3db952(0x1fb)][_0x3db952(0x206)]['value']=_0x51dd6d;});}[_0x49acb7(0x209)](){const _0x152dc1=_0x49acb7;this[_0x152dc1(0x1bb)][_0x152dc1(0x1f5)][_0x152dc1(0x1fb)][_0x152dc1(0x181)][_0x152dc1(0x1f0)]['copy'](this[_0x152dc1(0x1c0)])[_0x152dc1(0x1fe)](),this[_0x152dc1(0x1e7)]['material']['uniforms'][_0x152dc1(0x1cc)][_0x152dc1(0x1f0)][_0x152dc1(0x205)](this[_0x152dc1(0x1c0)]),this[_0x152dc1(0x1e4)]&&this[_0x152dc1(0x1e4)][_0x152dc1(0x1ae)](),this[_0x152dc1(0x1e4)]=this[_0x152dc1(0x1c5)]['fromScene'](this['scene']),this['scene'][_0x152dc1(0x212)]=this[_0x152dc1(0x1e4)][_0x152dc1(0x18f)];}[_0x49acb7(0x18a)](){const _0xd4642e=_0x49acb7;this[_0xd4642e(0x1ed)]['setSize'](window[_0xd4642e(0x1c1)],window['innerHeight']),this['camera'][_0xd4642e(0x1dd)]=window['innerWidth']/window[_0xd4642e(0x1b4)],this[_0xd4642e(0x1d2)][_0xd4642e(0x1e1)]();}[_0x49acb7(0x18d)](){const _0xd70a5=_0x49acb7;this['water']=new _0x2fd29a['E'](new _0xd69134[(_0xd70a5(0x211))](0x2710,0x2710),{'textureWidth':0x200,'textureHeight':0x200,'waterNormals':new _0xd69134[(_0xd70a5(0x1a6))]()['load'](_0xd70a5(0x1cf),_0x4b4a63=>{const _0xdd8a5b=_0xd70a5;_0x4b4a63[_0xdd8a5b(0x1f7)]=_0x4b4a63[_0xdd8a5b(0x1b6)]=_0xd69134[_0xdd8a5b(0x182)];}),'sunColor':0xffffff,'waterColor':0x72ff,'alpha':0x1,'distortionScale':0x14,'fog':!0x1}),this[_0xd70a5(0x1bb)]['rotation']['x']=-Math['PI']/0x2,this[_0xd70a5(0x1b1)][_0xd70a5(0x1f1)](this[_0xd70a5(0x1bb)]),this[_0xd70a5(0x1e7)]=new _0x293439(),this[_0xd70a5(0x1e7)][_0xd70a5(0x1f3)][_0xd70a5(0x207)](0x2710),this[_0xd70a5(0x1e7)][_0xd70a5(0x1f5)][_0xd70a5(0x1fb)][_0xd70a5(0x1ff)][_0xd70a5(0x1f0)]=0x1,this[_0xd70a5(0x1e7)]['material'][_0xd70a5(0x1fb)]['rayleigh']['value']=1.5,this[_0xd70a5(0x1e7)][_0xd70a5(0x1f5)]['uniforms'][_0xd70a5(0x1ba)][_0xd70a5(0x1f0)]=0.005,this[_0xd70a5(0x1e7)][_0xd70a5(0x1f5)][_0xd70a5(0x1fb)]['mieDirectionalG'][_0xd70a5(0x1f0)]=0.8,this['scene'][_0xd70a5(0x1f1)](this['sky']),this[_0xd70a5(0x1c0)]=new _0xd69134['Pq0'](-0x50,0x5,-0x64),this[_0xd70a5(0x1bb)][_0xd70a5(0x1f5)][_0xd70a5(0x1fb)][_0xd70a5(0x181)][_0xd70a5(0x1f0)][_0xd70a5(0x205)](this[_0xd70a5(0x1c0)])[_0xd70a5(0x1fe)](),this[_0xd70a5(0x1e7)][_0xd70a5(0x1f5)][_0xd70a5(0x1fb)]['sunPosition']['value']['copy'](this[_0xd70a5(0x1c0)]),this[_0xd70a5(0x1c5)]=new _0xd69134[(_0xd70a5(0x1eb))](this['renderer']),this[_0xd70a5(0x1e4)]&&this[_0xd70a5(0x1e4)]['dispose'](),this[_0xd70a5(0x1e4)]=this[_0xd70a5(0x1c5)][_0xd70a5(0x1b9)](this[_0xd70a5(0x1b1)]),this[_0xd70a5(0x1b1)][_0xd70a5(0x212)]=this['renderTarget'][_0xd70a5(0x18f)];const _0x586c93=new _0xd69134['wng'](0x14,0x1),_0x223272=new _0xd69134[(_0xd70a5(0x218))]({'roughness':0x0,'side':_0xd69134[_0xd70a5(0x1f8)],'flatShading':!0x0});this[_0xd70a5(0x1a3)]=new _0xd69134[(_0xd70a5(0x1e6))](_0x586c93,_0x223272),this['scene'][_0xd70a5(0x1f1)](this[_0xd70a5(0x1a3)]);}[_0x49acb7(0x1f2)](){const _0x36557d=_0x49acb7;this['controls']['update'](this['clock'][_0x36557d(0x1e8)]()),this[_0x36557d(0x1bb)][_0x36557d(0x1f5)][_0x36557d(0x1fb)]['time'][_0x36557d(0x1f0)]+=this[_0x36557d(0x1a9)]['speed']/0x3c;const _0x20be5a=Date[_0x36557d(0x19a)]();this['cube'][_0x36557d(0x1d6)]['y']=0x14*Math[_0x36557d(0x1ac)](0.001*_0x20be5a)+0x5,this[_0x36557d(0x1a3)]['rotation']['x']=0.001*_0x20be5a*0.5,this['cube'][_0x36557d(0x21c)]['z']=0.001*_0x20be5a*0.5,this[_0x36557d(0x1ed)]['render'](this[_0x36557d(0x1b1)],this['camera']),requestAnimationFrame(this[_0x36557d(0x1f2)][_0x36557d(0x1e3)](this)),this['cubeCamera'][_0x36557d(0x19c)](this[_0x36557d(0x1ed)],this[_0x36557d(0x1b1)]);}[_0x49acb7(0x1c8)](){const _0x2eb7aa=_0x49acb7;this[_0x2eb7aa(0x1d9)][_0x2eb7aa(0x217)](),window['removeEventListener'](_0x2eb7aa(0x187),this['_resizeFn']);}}const _0x554314={'id':_0x49acb7(0x1f6),'class':_0x49acb7(0x1f6)},_0x145884={'name':'Ocean'};var _0x4475cf=Object['assign'](_0x145884,{'setup'(_0x153cae){const _0x45c1f0=_0x49acb7;let _0x12e42c;return(0x0,_0x1f83e2['sV'])(()=>{_0x12e42c=new _0x5497f8();}),(0x0,_0x1f83e2['xo'])(()=>{const _0x1ff963=a16_0x28f6;_0x12e42c&&_0x12e42c[_0x1ff963(0x1c8)]();}),(_0x1f58df,_0x542e1f)=>((0x0,_0x1f83e2['uX'])(),(0x0,_0x1f83e2['CE'])(_0x45c1f0(0x219),_0x554314));}});const _0x1d8cbc=_0x4475cf;var _0x370326=_0x1d8cbc;},0x29ac:function(_0x42568c,_0x3dbd2e,_0x5319be){_0x5319be['d'](_0x3dbd2e,{'E':function(){return _0x1d70d5;}});var _0x906c1a=_0x5319be(0x12516);class _0x1d70d5 extends _0x906c1a['eaF']{constructor(_0x1fbb2f,_0x32c456={}){const _0x1eb5f8=a16_0x28f6;super(_0x1fbb2f),this[_0x1eb5f8(0x197)]=!0x0;const _0x4183bd=this,_0x4e85a4=void 0x0!==_0x32c456[_0x1eb5f8(0x214)]?_0x32c456[_0x1eb5f8(0x214)]:0x200,_0x31a738=void 0x0!==_0x32c456['textureHeight']?_0x32c456[_0x1eb5f8(0x200)]:0x200,_0x23501e=void 0x0!==_0x32c456[_0x1eb5f8(0x20f)]?_0x32c456[_0x1eb5f8(0x20f)]:0x0,_0x26ec65=void 0x0!==_0x32c456['alpha']?_0x32c456[_0x1eb5f8(0x1fd)]:0x1,_0x3e2080=void 0x0!==_0x32c456['time']?_0x32c456['time']:0x0,_0x4507a3=void 0x0!==_0x32c456[_0x1eb5f8(0x1ef)]?_0x32c456[_0x1eb5f8(0x1ef)]:null,_0x41c301=void 0x0!==_0x32c456[_0x1eb5f8(0x181)]?_0x32c456[_0x1eb5f8(0x181)]:new _0x906c1a['Pq0'](0.70707,0.70707,0x0),_0x2261bb=new _0x906c1a['Q1f'](void 0x0!==_0x32c456['sunColor']?_0x32c456[_0x1eb5f8(0x1a4)]:0xffffff),_0x56965f=new _0x906c1a[(_0x1eb5f8(0x20b))](void 0x0!==_0x32c456[_0x1eb5f8(0x19b)]?_0x32c456[_0x1eb5f8(0x19b)]:0x7f7f7f),_0x48aba5=void 0x0!==_0x32c456[_0x1eb5f8(0x1bc)]?_0x32c456[_0x1eb5f8(0x1bc)]:new _0x906c1a[(_0x1eb5f8(0x1a0))](0x0,0x0,0x0),_0x927c30=void 0x0!==_0x32c456[_0x1eb5f8(0x1d8)]?_0x32c456[_0x1eb5f8(0x1d8)]:0x14,_0x196ae5=void 0x0!==_0x32c456['side']?_0x32c456[_0x1eb5f8(0x20d)]:_0x906c1a[_0x1eb5f8(0x1ab)],_0xf7f7c6=void 0x0!==_0x32c456['fog']&&_0x32c456[_0x1eb5f8(0x20a)],_0x2b733b=new _0x906c1a[(_0x1eb5f8(0x1b2))](),_0x1c9812=new _0x906c1a[(_0x1eb5f8(0x1a0))](),_0x1ed36e=new _0x906c1a[(_0x1eb5f8(0x1a0))](),_0x6b5831=new _0x906c1a[(_0x1eb5f8(0x1a0))](),_0x1c93ba=new _0x906c1a['kn4'](),_0x43e9b0=new _0x906c1a[(_0x1eb5f8(0x1a0))](0x0,0x0,-0x1),_0x5568c0=new _0x906c1a['IUQ'](),_0x5644b8=new _0x906c1a[(_0x1eb5f8(0x1a0))](),_0x2720c8=new _0x906c1a[(_0x1eb5f8(0x1a0))](),_0x2792b2=new _0x906c1a[(_0x1eb5f8(0x1a8))](),_0x9eb084=new _0x906c1a[(_0x1eb5f8(0x1c9))](),_0x15d60a=new _0x906c1a[(_0x1eb5f8(0x1ce))](),_0x16c48b=new _0x906c1a['nWS'](_0x4e85a4,_0x31a738),_0xf84cbf={'uniforms':_0x906c1a['LlO'][_0x1eb5f8(0x18b)]([_0x906c1a[_0x1eb5f8(0x1cb)]['fog'],_0x906c1a[_0x1eb5f8(0x1cb)]['lights'],{'normalSampler':{'value':null},'mirrorSampler':{'value':null},'alpha':{'value':0x1},'time':{'value':0x0},'size':{'value':0x1},'distortionScale':{'value':0x14},'textureMatrix':{'value':new _0x906c1a[(_0x1eb5f8(0x1c9))]()},'sunColor':{'value':new _0x906c1a[(_0x1eb5f8(0x20b))](0x7f7f7f)},'sunDirection':{'value':new _0x906c1a[(_0x1eb5f8(0x1a0))](0.70707,0.70707,0x0)},'eye':{'value':new _0x906c1a['Pq0']()},'waterColor':{'value':new _0x906c1a['Q1f'](0x555555)}}]),'vertexShader':_0x1eb5f8(0x186),'fragmentShader':_0x1eb5f8(0x184)},_0x1c76ed=new _0x906c1a[(_0x1eb5f8(0x183))]({'fragmentShader':_0xf84cbf[_0x1eb5f8(0x1f4)],'vertexShader':_0xf84cbf['vertexShader'],'uniforms':_0x906c1a[_0x1eb5f8(0x1d1)][_0x1eb5f8(0x1db)](_0xf84cbf[_0x1eb5f8(0x1fb)]),'lights':!0x0,'side':_0x196ae5,'fog':_0xf7f7c6});_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x1a5)][_0x1eb5f8(0x1f0)]=_0x16c48b[_0x1eb5f8(0x18f)],_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x1fc)][_0x1eb5f8(0x1f0)]=_0x9eb084,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x1fd)][_0x1eb5f8(0x1f0)]=_0x26ec65,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x19f)][_0x1eb5f8(0x1f0)]=_0x3e2080,_0x1c76ed[_0x1eb5f8(0x1fb)]['normalSampler'][_0x1eb5f8(0x1f0)]=_0x4507a3,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x1a4)][_0x1eb5f8(0x1f0)]=_0x2261bb,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x19b)][_0x1eb5f8(0x1f0)]=_0x56965f,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x181)]['value']=_0x41c301,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x1d8)]['value']=_0x927c30,_0x1c76ed[_0x1eb5f8(0x1fb)][_0x1eb5f8(0x1bc)][_0x1eb5f8(0x1f0)]=_0x48aba5,_0x4183bd[_0x1eb5f8(0x1f5)]=_0x1c76ed,_0x4183bd[_0x1eb5f8(0x193)]=function(_0x43aec7,_0x20f23b,_0x573e20){const _0x1a00e2=_0x1eb5f8;if(_0x1ed36e[_0x1a00e2(0x1de)](_0x4183bd[_0x1a00e2(0x202)]),_0x6b5831[_0x1a00e2(0x1de)](_0x573e20['matrixWorld']),_0x1c93ba[_0x1a00e2(0x21d)](_0x4183bd[_0x1a00e2(0x202)]),_0x1c9812[_0x1a00e2(0x1c6)](0x0,0x0,0x1),_0x1c9812['applyMatrix4'](_0x1c93ba),_0x5644b8[_0x1a00e2(0x1e0)](_0x1ed36e,_0x6b5831),_0x5644b8['dot'](_0x1c9812)>0x0)return;_0x5644b8[_0x1a00e2(0x199)](_0x1c9812)[_0x1a00e2(0x19e)](),_0x5644b8[_0x1a00e2(0x1f1)](_0x1ed36e),_0x1c93ba[_0x1a00e2(0x21d)](_0x573e20['matrixWorld']),_0x43e9b0['set'](0x0,0x0,-0x1),_0x43e9b0[_0x1a00e2(0x1af)](_0x1c93ba),_0x43e9b0[_0x1a00e2(0x1f1)](_0x6b5831),_0x2720c8[_0x1a00e2(0x1e0)](_0x1ed36e,_0x43e9b0),_0x2720c8['reflect'](_0x1c9812)[_0x1a00e2(0x19e)](),_0x2720c8[_0x1a00e2(0x1f1)](_0x1ed36e),_0x15d60a[_0x1a00e2(0x1d6)][_0x1a00e2(0x205)](_0x5644b8),_0x15d60a['up']['set'](0x0,0x1,0x0),_0x15d60a['up'][_0x1a00e2(0x1af)](_0x1c93ba),_0x15d60a['up']['reflect'](_0x1c9812),_0x15d60a[_0x1a00e2(0x216)](_0x2720c8),_0x15d60a[_0x1a00e2(0x1ca)]=_0x573e20[_0x1a00e2(0x1ca)],_0x15d60a[_0x1a00e2(0x190)](),_0x15d60a[_0x1a00e2(0x1c3)]['copy'](_0x573e20[_0x1a00e2(0x1c3)]),_0x9eb084[_0x1a00e2(0x1c6)](0.5,0x0,0x0,0.5,0x0,0.5,0x0,0.5,0x0,0x0,0.5,0.5,0x0,0x0,0x0,0x1),_0x9eb084[_0x1a00e2(0x1d5)](_0x15d60a['projectionMatrix']),_0x9eb084[_0x1a00e2(0x1d5)](_0x15d60a['matrixWorldInverse']),_0x2b733b[_0x1a00e2(0x1d7)](_0x1c9812,_0x1ed36e),_0x2b733b[_0x1a00e2(0x1af)](_0x15d60a[_0x1a00e2(0x1c4)]),_0x5568c0['set'](_0x2b733b[_0x1a00e2(0x1df)]['x'],_0x2b733b[_0x1a00e2(0x1df)]['y'],_0x2b733b['normal']['z'],_0x2b733b[_0x1a00e2(0x1b7)]);const _0x26588f=_0x15d60a[_0x1a00e2(0x1c3)];_0x2792b2['x']=(Math[_0x1a00e2(0x1b3)](_0x5568c0['x'])+_0x26588f[_0x1a00e2(0x18c)][0x8])/_0x26588f['elements'][0x0],_0x2792b2['y']=(Math[_0x1a00e2(0x1b3)](_0x5568c0['y'])+_0x26588f[_0x1a00e2(0x18c)][0x9])/_0x26588f['elements'][0x5],_0x2792b2['z']=-0x1,_0x2792b2['w']=(0x1+_0x26588f[_0x1a00e2(0x18c)][0xa])/_0x26588f['elements'][0xe],_0x5568c0[_0x1a00e2(0x1aa)](0x2/_0x5568c0[_0x1a00e2(0x19d)](_0x2792b2)),_0x26588f[_0x1a00e2(0x18c)][0x2]=_0x5568c0['x'],_0x26588f[_0x1a00e2(0x18c)][0x6]=_0x5568c0['y'],_0x26588f[_0x1a00e2(0x18c)][0xa]=_0x5568c0['z']+0x1-_0x23501e,_0x26588f['elements'][0xe]=_0x5568c0['w'],_0x48aba5[_0x1a00e2(0x1de)](_0x573e20['matrixWorld']);const _0x59bdb2=_0x43aec7[_0x1a00e2(0x201)](),_0x1a0d86=_0x43aec7['xr'][_0x1a00e2(0x180)],_0x475999=_0x43aec7['shadowMap'][_0x1a00e2(0x20c)];_0x4183bd['visible']=!0x1,_0x43aec7['xr'][_0x1a00e2(0x180)]=!0x1,_0x43aec7[_0x1a00e2(0x189)][_0x1a00e2(0x20c)]=!0x1,_0x43aec7['setRenderTarget'](_0x16c48b),_0x43aec7[_0x1a00e2(0x1c7)][_0x1a00e2(0x1dc)][_0x1a00e2(0x210)]['setMask'](!0x0),!0x1===_0x43aec7[_0x1a00e2(0x1a2)]&&_0x43aec7[_0x1a00e2(0x203)](),_0x43aec7['render'](_0x20f23b,_0x15d60a),_0x4183bd['visible']=!0x0,_0x43aec7['xr'][_0x1a00e2(0x180)]=_0x1a0d86,_0x43aec7['shadowMap'][_0x1a00e2(0x20c)]=_0x475999,_0x43aec7[_0x1a00e2(0x1ec)](_0x59bdb2);const _0x506d2b=_0x573e20['viewport'];void 0x0!==_0x506d2b&&_0x43aec7['state']['viewport'](_0x506d2b);};}}}}]);function a16_0x28f6(_0x2a0e0f,_0x293369){const _0x7a312b=a16_0x7a31();return a16_0x28f6=function(_0x28f616,_0x13abc7){_0x28f616=_0x28f616-0x17f;let _0x5777e3=_0x7a312b[_0x28f616];return _0x5777e3;},a16_0x28f6(_0x2a0e0f,_0x293369);}function a16_0x7a31(){const _0x3f5697=['set','state','beforeDestroy','kn4','far','fCn','sunPosition','239LvpytJ','ubm','/images/textures/waternormals.jpg','F1T','LlO','camera','webpackChunkcreation_gallery','name','multiply','position','setFromNormalAndCoplanarPoint','distortionScale','gui','ZyN','clone','buffers','aspect','setFromMatrixPosition','normal','subVectors','updateProjectionMatrix','skyParams','bind','renderTarget','扭曲比例','eaF','sky','getDelta','14mcPhir','112190CyBBzP','BdL','setRenderTarget','renderer','9105107KRVXfF','waterNormals','value','add','render','scale','fragmentShader','material','webgl-output','wrapS','$EB','enableGui','2836ANqtXv','uniforms','textureMatrix','alpha','normalize','turbidity','textureHeight','getRenderTarget','matrixWorld','clear','太阳位置','copy','rayleigh','setScalar','addFolder','updateSunPosition','fog','Q1f','autoUpdate','side','2321636hNrHrP','clipBias','depth','bdM','environment','dirLight','textureWidth','5kRmXYA','lookAt','destroy','_4j','div','push','\x0a\x09\x09uniform\x20vec3\x20sunPosition;\x0a\x09\x09uniform\x20float\x20rayleigh;\x0a\x09\x09uniform\x20float\x20turbidity;\x0a\x09\x09uniform\x20float\x20mieCoefficient;\x0a\x09\x09uniform\x20vec3\x20up;\x0a\x0a\x09\x09varying\x20vec3\x20vWorldPosition;\x0a\x09\x09varying\x20vec3\x20vSunDirection;\x0a\x09\x09varying\x20float\x20vSunfade;\x0a\x09\x09varying\x20vec3\x20vBetaR;\x0a\x09\x09varying\x20vec3\x20vBetaM;\x0a\x09\x09varying\x20float\x20vSunE;\x0a\x0a\x09\x09//\x20constants\x20for\x20atmospheric\x20scattering\x0a\x09\x09const\x20float\x20e\x20=\x202.71828182845904523536028747135266249775724709369995957;\x0a\x09\x09const\x20float\x20pi\x20=\x203.141592653589793238462643383279502884197169;\x0a\x0a\x09\x09//\x20wavelength\x20of\x20used\x20primaries,\x20according\x20to\x20preetham\x0a\x09\x09const\x20vec3\x20lambda\x20=\x20vec3(\x20680E-9,\x20550E-9,\x20450E-9\x20);\x0a\x09\x09//\x20this\x20pre-calcuation\x20replaces\x20older\x20TotalRayleigh(vec3\x20lambda)\x20function:\x0a\x09\x09//\x20(8.0\x20*\x20pow(pi,\x203.0)\x20*\x20pow(pow(n,\x202.0)\x20-\x201.0,\x202.0)\x20*\x20(6.0\x20+\x203.0\x20*\x20pn))\x20/\x20(3.0\x20*\x20N\x20*\x20pow(lambda,\x20vec3(4.0))\x20*\x20(6.0\x20-\x207.0\x20*\x20pn))\x0a\x09\x09const\x20vec3\x20totalRayleigh\x20=\x20vec3(\x205.804542996261093E-6,\x201.3562911419845635E-5,\x203.0265902468824876E-5\x20);\x0a\x0a\x09\x09//\x20mie\x20stuff\x0a\x09\x09//\x20K\x20coefficient\x20for\x20the\x20primaries\x0a\x09\x09const\x20float\x20v\x20=\x204.0;\x0a\x09\x09const\x20vec3\x20K\x20=\x20vec3(\x200.686,\x200.678,\x200.666\x20);\x0a\x09\x09//\x20MieConst\x20=\x20pi\x20*\x20pow(\x20(\x202.0\x20*\x20pi\x20)\x20/\x20lambda,\x20vec3(\x20v\x20-\x202.0\x20)\x20)\x20*\x20K\x0a\x09\x09const\x20vec3\x20MieConst\x20=\x20vec3(\x201.8399918514433978E14,\x202.7798023919660528E14,\x204.0790479543861094E14\x20);\x0a\x0a\x09\x09//\x20earth\x20shadow\x20hack\x0a\x09\x09//\x20cutoffAngle\x20=\x20pi\x20/\x201.95;\x0a\x09\x09const\x20float\x20cutoffAngle\x20=\x201.6110731556870734;\x0a\x09\x09const\x20float\x20steepness\x20=\x201.5;\x0a\x09\x09const\x20float\x20EE\x20=\x201000.0;\x0a\x0a\x09\x09float\x20sunIntensity(\x20float\x20zenithAngleCos\x20)\x20{\x0a\x09\x09\x09zenithAngleCos\x20=\x20clamp(\x20zenithAngleCos,\x20-1.0,\x201.0\x20);\x0a\x09\x09\x09return\x20EE\x20*\x20max(\x200.0,\x201.0\x20-\x20pow(\x20e,\x20-(\x20(\x20cutoffAngle\x20-\x20acos(\x20zenithAngleCos\x20)\x20)\x20/\x20steepness\x20)\x20)\x20);\x0a\x09\x09}\x0a\x0a\x09\x09vec3\x20totalMie(\x20float\x20T\x20)\x20{\x0a\x09\x09\x09float\x20c\x20=\x20(\x200.2\x20*\x20T\x20)\x20*\x2010E-18;\x0a\x09\x09\x09return\x200.434\x20*\x20c\x20*\x20MieConst;\x0a\x09\x09}\x0a\x0a\x09\x09void\x20main()\x20{\x0a\x0a\x09\x09\x09vec4\x20worldPosition\x20=\x20modelMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x09\x09\x09vWorldPosition\x20=\x20worldPosition.xyz;\x0a\x0a\x09\x09\x09gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x09\x09\x09gl_Position.z\x20=\x20gl_Position.w;\x20//\x20set\x20z\x20to\x20camera.far\x0a\x0a\x09\x09\x09vSunDirection\x20=\x20normalize(\x20sunPosition\x20);\x0a\x0a\x09\x09\x09vSunE\x20=\x20sunIntensity(\x20dot(\x20vSunDirection,\x20up\x20)\x20);\x0a\x0a\x09\x09\x09vSunfade\x20=\x201.0\x20-\x20clamp(\x201.0\x20-\x20exp(\x20(\x20sunPosition.y\x20/\x20450000.0\x20)\x20),\x200.0,\x201.0\x20);\x0a\x0a\x09\x09\x09float\x20rayleighCoefficient\x20=\x20rayleigh\x20-\x20(\x201.0\x20*\x20(\x201.0\x20-\x20vSunfade\x20)\x20);\x0a\x0a\x09\x09\x09//\x20extinction\x20(absorbtion\x20+\x20out\x20scattering)\x0a\x09\x09\x09//\x20rayleigh\x20coefficients\x0a\x09\x09\x09vBetaR\x20=\x20totalRayleigh\x20*\x20rayleighCoefficient;\x0a\x0a\x09\x09\x09//\x20mie\x20coefficients\x0a\x09\x09\x09vBetaM\x20=\x20totalMie(\x20turbidity\x20)\x20*\x20mieCoefficient;\x0a\x0a\x09\x09}','rotation','extractRotation','isSky','enabled','sunDirection','GJx','BKk','\x0a\x09\x09\x09\x09uniform\x20sampler2D\x20mirrorSampler;\x0a\x09\x09\x09\x09uniform\x20float\x20alpha;\x0a\x09\x09\x09\x09uniform\x20float\x20time;\x0a\x09\x09\x09\x09uniform\x20float\x20size;\x0a\x09\x09\x09\x09uniform\x20float\x20distortionScale;\x0a\x09\x09\x09\x09uniform\x20sampler2D\x20normalSampler;\x0a\x09\x09\x09\x09uniform\x20vec3\x20sunColor;\x0a\x09\x09\x09\x09uniform\x20vec3\x20sunDirection;\x0a\x09\x09\x09\x09uniform\x20vec3\x20eye;\x0a\x09\x09\x09\x09uniform\x20vec3\x20waterColor;\x0a\x0a\x09\x09\x09\x09varying\x20vec4\x20mirrorCoord;\x0a\x09\x09\x09\x09varying\x20vec4\x20worldPosition;\x0a\x0a\x09\x09\x09\x09vec4\x20getNoise(\x20vec2\x20uv\x20)\x20{\x0a\x09\x09\x09\x09\x09vec2\x20uv0\x20=\x20(\x20uv\x20/\x20103.0\x20)\x20+\x20vec2(time\x20/\x2017.0,\x20time\x20/\x2029.0);\x0a\x09\x09\x09\x09\x09vec2\x20uv1\x20=\x20uv\x20/\x20107.0-vec2(\x20time\x20/\x20-19.0,\x20time\x20/\x2031.0\x20);\x0a\x09\x09\x09\x09\x09vec2\x20uv2\x20=\x20uv\x20/\x20vec2(\x208907.0,\x209803.0\x20)\x20+\x20vec2(\x20time\x20/\x20101.0,\x20time\x20/\x2097.0\x20);\x0a\x09\x09\x09\x09\x09vec2\x20uv3\x20=\x20uv\x20/\x20vec2(\x201091.0,\x201027.0\x20)\x20-\x20vec2(\x20time\x20/\x20109.0,\x20time\x20/\x20-113.0\x20);\x0a\x09\x09\x09\x09\x09vec4\x20noise\x20=\x20texture2D(\x20normalSampler,\x20uv0\x20)\x20+\x0a\x09\x09\x09\x09\x09\x09texture2D(\x20normalSampler,\x20uv1\x20)\x20+\x0a\x09\x09\x09\x09\x09\x09texture2D(\x20normalSampler,\x20uv2\x20)\x20+\x0a\x09\x09\x09\x09\x09\x09texture2D(\x20normalSampler,\x20uv3\x20);\x0a\x09\x09\x09\x09\x09return\x20noise\x20*\x200.5\x20-\x201.0;\x0a\x09\x09\x09\x09}\x0a\x0a\x09\x09\x09\x09void\x20sunLight(\x20const\x20vec3\x20surfaceNormal,\x20const\x20vec3\x20eyeDirection,\x20float\x20shiny,\x20float\x20spec,\x20float\x20diffuse,\x20inout\x20vec3\x20diffuseColor,\x20inout\x20vec3\x20specularColor\x20)\x20{\x0a\x09\x09\x09\x09\x09vec3\x20reflection\x20=\x20normalize(\x20reflect(\x20-sunDirection,\x20surfaceNormal\x20)\x20);\x0a\x09\x09\x09\x09\x09float\x20direction\x20=\x20max(\x200.0,\x20dot(\x20eyeDirection,\x20reflection\x20)\x20);\x0a\x09\x09\x09\x09\x09specularColor\x20+=\x20pow(\x20direction,\x20shiny\x20)\x20*\x20sunColor\x20*\x20spec;\x0a\x09\x09\x09\x09\x09diffuseColor\x20+=\x20max(\x20dot(\x20sunDirection,\x20surfaceNormal\x20),\x200.0\x20)\x20*\x20sunColor\x20*\x20diffuse;\x0a\x09\x09\x09\x09}\x0a\x0a\x09\x09\x09\x09#include\x20<common>\x0a\x09\x09\x09\x09#include\x20<packing>\x0a\x09\x09\x09\x09#include\x20<bsdfs>\x0a\x09\x09\x09\x09#include\x20<fog_pars_fragment>\x0a\x09\x09\x09\x09#include\x20<logdepthbuf_pars_fragment>\x0a\x09\x09\x09\x09#include\x20<lights_pars_begin>\x0a\x09\x09\x09\x09#include\x20<shadowmap_pars_fragment>\x0a\x09\x09\x09\x09#include\x20<shadowmask_pars_fragment>\x0a\x0a\x09\x09\x09\x09void\x20main()\x20{\x0a\x0a\x09\x09\x09\x09\x09#include\x20<logdepthbuf_fragment>\x0a\x09\x09\x09\x09\x09vec4\x20noise\x20=\x20getNoise(\x20worldPosition.xz\x20*\x20size\x20);\x0a\x09\x09\x09\x09\x09vec3\x20surfaceNormal\x20=\x20normalize(\x20noise.xzy\x20*\x20vec3(\x201.5,\x201.0,\x201.5\x20)\x20);\x0a\x0a\x09\x09\x09\x09\x09vec3\x20diffuseLight\x20=\x20vec3(0.0);\x0a\x09\x09\x09\x09\x09vec3\x20specularLight\x20=\x20vec3(0.0);\x0a\x0a\x09\x09\x09\x09\x09vec3\x20worldToEye\x20=\x20eye-worldPosition.xyz;\x0a\x09\x09\x09\x09\x09vec3\x20eyeDirection\x20=\x20normalize(\x20worldToEye\x20);\x0a\x09\x09\x09\x09\x09sunLight(\x20surfaceNormal,\x20eyeDirection,\x20100.0,\x202.0,\x200.5,\x20diffuseLight,\x20specularLight\x20);\x0a\x0a\x09\x09\x09\x09\x09float\x20distance\x20=\x20length(worldToEye);\x0a\x0a\x09\x09\x09\x09\x09vec2\x20distortion\x20=\x20surfaceNormal.xz\x20*\x20(\x200.001\x20+\x201.0\x20/\x20distance\x20)\x20*\x20distortionScale;\x0a\x09\x09\x09\x09\x09vec3\x20reflectionSample\x20=\x20vec3(\x20texture2D(\x20mirrorSampler,\x20mirrorCoord.xy\x20/\x20mirrorCoord.w\x20+\x20distortion\x20)\x20);\x0a\x0a\x09\x09\x09\x09\x09float\x20theta\x20=\x20max(\x20dot(\x20eyeDirection,\x20surfaceNormal\x20),\x200.0\x20);\x0a\x09\x09\x09\x09\x09float\x20rf0\x20=\x200.3;\x0a\x09\x09\x09\x09\x09float\x20reflectance\x20=\x20rf0\x20+\x20(\x201.0\x20-\x20rf0\x20)\x20*\x20pow(\x20(\x201.0\x20-\x20theta\x20),\x205.0\x20);\x0a\x09\x09\x09\x09\x09vec3\x20scatter\x20=\x20max(\x200.0,\x20dot(\x20surfaceNormal,\x20eyeDirection\x20)\x20)\x20*\x20waterColor;\x0a\x09\x09\x09\x09\x09vec3\x20albedo\x20=\x20mix(\x20(\x20sunColor\x20*\x20diffuseLight\x20*\x200.3\x20+\x20scatter\x20)\x20*\x20getShadowMask(),\x20(\x20vec3(\x200.1\x20)\x20+\x20reflectionSample\x20*\x200.9\x20+\x20reflectionSample\x20*\x20specularLight\x20),\x20reflectance);\x0a\x09\x09\x09\x09\x09vec3\x20outgoingLight\x20=\x20albedo;\x0a\x09\x09\x09\x09\x09gl_FragColor\x20=\x20vec4(\x20outgoingLight,\x20alpha\x20);\x0a\x0a\x09\x09\x09\x09\x09#include\x20<tonemapping_fragment>\x0a\x09\x09\x09\x09\x09#include\x20<fog_fragment>\x0a\x09\x09\x09\x09}','initLight','\x0a\x09\x09\x09\x09uniform\x20mat4\x20textureMatrix;\x0a\x09\x09\x09\x09uniform\x20float\x20time;\x0a\x0a\x09\x09\x09\x09varying\x20vec4\x20mirrorCoord;\x0a\x09\x09\x09\x09varying\x20vec4\x20worldPosition;\x0a\x0a\x09\x09\x09\x09#include\x20<common>\x0a\x09\x09\x09\x09#include\x20<fog_pars_vertex>\x0a\x09\x09\x09\x09#include\x20<shadowmap_pars_vertex>\x0a\x09\x09\x09\x09#include\x20<logdepthbuf_pars_vertex>\x0a\x0a\x09\x09\x09\x09void\x20main()\x20{\x0a\x09\x09\x09\x09\x09mirrorCoord\x20=\x20modelMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x09\x09\x09\x09\x09worldPosition\x20=\x20mirrorCoord.xyzw;\x0a\x09\x09\x09\x09\x09mirrorCoord\x20=\x20textureMatrix\x20*\x20mirrorCoord;\x0a\x09\x09\x09\x09\x09vec4\x20mvPosition\x20=\x20\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x09\x09\x09\x09\x09gl_Position\x20=\x20projectionMatrix\x20*\x20mvPosition;\x0a\x0a\x09\x09\x09\x09#include\x20<beginnormal_vertex>\x0a\x09\x09\x09\x09#include\x20<defaultnormal_vertex>\x0a\x09\x09\x09\x09#include\x20<logdepthbuf_vertex>\x0a\x09\x09\x09\x09#include\x20<fog_vertex>\x0a\x09\x09\x09\x09#include\x20<shadowmap_vertex>\x0a\x09\x09\x09}','resize','step','shadowMap','resizeFn','merge','elements','initMeshes','controls','texture','updateMatrixWorld','SkyShader','4164rSlUJp','onBeforeRender','\x0a\x09\x09varying\x20vec3\x20vWorldPosition;\x0a\x09\x09varying\x20vec3\x20vSunDirection;\x0a\x09\x09varying\x20float\x20vSunfade;\x0a\x09\x09varying\x20vec3\x20vBetaR;\x0a\x09\x09varying\x20vec3\x20vBetaM;\x0a\x09\x09varying\x20float\x20vSunE;\x0a\x0a\x09\x09uniform\x20float\x20mieDirectionalG;\x0a\x09\x09uniform\x20vec3\x20up;\x0a\x0a\x09\x09const\x20vec3\x20cameraPos\x20=\x20vec3(\x200.0,\x200.0,\x200.0\x20);\x0a\x0a\x09\x09//\x20constants\x20for\x20atmospheric\x20scattering\x0a\x09\x09const\x20float\x20pi\x20=\x203.141592653589793238462643383279502884197169;\x0a\x0a\x09\x09const\x20float\x20n\x20=\x201.0003;\x20//\x20refractive\x20index\x20of\x20air\x0a\x09\x09const\x20float\x20N\x20=\x202.545E25;\x20//\x20number\x20of\x20molecules\x20per\x20unit\x20volume\x20for\x20air\x20at\x20288.15K\x20and\x201013mb\x20(sea\x20level\x20-45\x20celsius)\x0a\x0a\x09\x09//\x20optical\x20length\x20at\x20zenith\x20for\x20molecules\x0a\x09\x09const\x20float\x20rayleighZenithLength\x20=\x208.4E3;\x0a\x09\x09const\x20float\x20mieZenithLength\x20=\x201.25E3;\x0a\x09\x09//\x2066\x20arc\x20seconds\x20->\x20degrees,\x20and\x20the\x20cosine\x20of\x20that\x0a\x09\x09const\x20float\x20sunAngularDiameterCos\x20=\x200.999956676946448443553574619906976478926848692873900859324;\x0a\x0a\x09\x09//\x203.0\x20/\x20(\x2016.0\x20*\x20pi\x20)\x0a\x09\x09const\x20float\x20THREE_OVER_SIXTEENPI\x20=\x200.05968310365946075;\x0a\x09\x09//\x201.0\x20/\x20(\x204.0\x20*\x20pi\x20)\x0a\x09\x09const\x20float\x20ONE_OVER_FOURPI\x20=\x200.07957747154594767;\x0a\x0a\x09\x09float\x20rayleighPhase(\x20float\x20cosTheta\x20)\x20{\x0a\x09\x09\x09return\x20THREE_OVER_SIXTEENPI\x20*\x20(\x201.0\x20+\x20pow(\x20cosTheta,\x202.0\x20)\x20);\x0a\x09\x09}\x0a\x0a\x09\x09float\x20hgPhase(\x20float\x20cosTheta,\x20float\x20g\x20)\x20{\x0a\x09\x09\x09float\x20g2\x20=\x20pow(\x20g,\x202.0\x20);\x0a\x09\x09\x09float\x20inverse\x20=\x201.0\x20/\x20pow(\x201.0\x20-\x202.0\x20*\x20g\x20*\x20cosTheta\x20+\x20g2,\x201.5\x20);\x0a\x09\x09\x09return\x20ONE_OVER_FOURPI\x20*\x20(\x20(\x201.0\x20-\x20g2\x20)\x20*\x20inverse\x20);\x0a\x09\x09}\x0a\x0a\x09\x09void\x20main()\x20{\x0a\x0a\x09\x09\x09vec3\x20direction\x20=\x20normalize(\x20vWorldPosition\x20-\x20cameraPos\x20);\x0a\x0a\x09\x09\x09//\x20optical\x20length\x0a\x09\x09\x09//\x20cutoff\x20angle\x20at\x2090\x20to\x20avoid\x20singularity\x20in\x20next\x20formula.\x0a\x09\x09\x09float\x20zenithAngle\x20=\x20acos(\x20max(\x200.0,\x20dot(\x20up,\x20direction\x20)\x20)\x20);\x0a\x09\x09\x09float\x20inverse\x20=\x201.0\x20/\x20(\x20cos(\x20zenithAngle\x20)\x20+\x200.15\x20*\x20pow(\x2093.885\x20-\x20(\x20(\x20zenithAngle\x20*\x20180.0\x20)\x20/\x20pi\x20),\x20-1.253\x20)\x20);\x0a\x09\x09\x09float\x20sR\x20=\x20rayleighZenithLength\x20*\x20inverse;\x0a\x09\x09\x09float\x20sM\x20=\x20mieZenithLength\x20*\x20inverse;\x0a\x0a\x09\x09\x09//\x20combined\x20extinction\x20factor\x0a\x09\x09\x09vec3\x20Fex\x20=\x20exp(\x20-(\x20vBetaR\x20*\x20sR\x20+\x20vBetaM\x20*\x20sM\x20)\x20);\x0a\x0a\x09\x09\x09//\x20in\x20scattering\x0a\x09\x09\x09float\x20cosTheta\x20=\x20dot(\x20direction,\x20vSunDirection\x20);\x0a\x0a\x09\x09\x09float\x20rPhase\x20=\x20rayleighPhase(\x20cosTheta\x20*\x200.5\x20+\x200.5\x20);\x0a\x09\x09\x09vec3\x20betaRTheta\x20=\x20vBetaR\x20*\x20rPhase;\x0a\x0a\x09\x09\x09float\x20mPhase\x20=\x20hgPhase(\x20cosTheta,\x20mieDirectionalG\x20);\x0a\x09\x09\x09vec3\x20betaMTheta\x20=\x20vBetaM\x20*\x20mPhase;\x0a\x0a\x09\x09\x09vec3\x20Lin\x20=\x20pow(\x20vSunE\x20*\x20(\x20(\x20betaRTheta\x20+\x20betaMTheta\x20)\x20/\x20(\x20vBetaR\x20+\x20vBetaM\x20)\x20)\x20*\x20(\x201.0\x20-\x20Fex\x20),\x20vec3(\x201.5\x20)\x20);\x0a\x09\x09\x09Lin\x20*=\x20mix(\x20vec3(\x201.0\x20),\x20pow(\x20vSunE\x20*\x20(\x20(\x20betaRTheta\x20+\x20betaMTheta\x20)\x20/\x20(\x20vBetaR\x20+\x20vBetaM\x20)\x20)\x20*\x20Fex,\x20vec3(\x201.0\x20/\x202.0\x20)\x20),\x20clamp(\x20pow(\x201.0\x20-\x20dot(\x20up,\x20vSunDirection\x20),\x205.0\x20),\x200.0,\x201.0\x20)\x20);\x0a\x0a\x09\x09\x09//\x20nightsky\x0a\x09\x09\x09float\x20theta\x20=\x20acos(\x20direction.y\x20);\x20//\x20elevation\x20-->\x20y-axis,\x20[-pi/2,\x20pi/2]\x0a\x09\x09\x09float\x20phi\x20=\x20atan(\x20direction.z,\x20direction.x\x20);\x20//\x20azimuth\x20-->\x20x-axis\x20[-pi/2,\x20pi/2]\x0a\x09\x09\x09vec2\x20uv\x20=\x20vec2(\x20phi,\x20theta\x20)\x20/\x20vec2(\x202.0\x20*\x20pi,\x20pi\x20)\x20+\x20vec2(\x200.5,\x200.0\x20);\x0a\x09\x09\x09vec3\x20L0\x20=\x20vec3(\x200.1\x20)\x20*\x20Fex;\x0a\x0a\x09\x09\x09//\x20composition\x20+\x20solar\x20disc\x0a\x09\x09\x09float\x20sundisk\x20=\x20smoothstep(\x20sunAngularDiameterCos,\x20sunAngularDiameterCos\x20+\x200.00002,\x20cosTheta\x20);\x0a\x09\x09\x09L0\x20+=\x20(\x20vSunE\x20*\x2019000.0\x20*\x20Fex\x20)\x20*\x20sundisk;\x0a\x0a\x09\x09\x09vec3\x20texColor\x20=\x20(\x20Lin\x20+\x20L0\x20)\x20*\x200.04\x20+\x20vec3(\x200.0,\x200.0003,\x200.00075\x20);\x0a\x0a\x09\x09\x09vec3\x20retColor\x20=\x20pow(\x20texColor,\x20vec3(\x201.0\x20/\x20(\x201.2\x20+\x20(\x201.2\x20*\x20vSunfade\x20)\x20)\x20)\x20);\x0a\x0a\x09\x09\x09gl_FragColor\x20=\x20vec4(\x20retColor,\x201.0\x20);\x0a\x0a\x09\x09\x09#include\x20<tonemapping_fragment>\x0a\x09\x09\x09#include\x20<encodings_fragment>\x0a\x0a\x09\x09}','1811907dSstKz','onChange','isWater','10BcPrIc','reflect','now','waterColor','update','dot','negate','time','Pq0','cubeCamera','autoClear','cube','sunColor','mirrorSampler','Tap','浑浊度','IUQ','waterParams','multiplyScalar','hB5','sin','644168MgpNwH','dispose','applyMatrix4','_resizeFn','scene','Zcv','sign','innerHeight','174882fRSbUm','wrapT','constant','addEventListener','fromScene','mieCoefficient','water','eye','iNn','水流速度','speed','sun','innerWidth','9Rxmlym','projectionMatrix','matrixWorldInverse','pmremGenerator'];a16_0x7a31=function(){return _0x3f5697;};return a16_0x7a31();}