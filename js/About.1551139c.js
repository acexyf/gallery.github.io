"use strict";(self["webpackChunkcreation_gallery"]=self["webpackChunkcreation_gallery"]||[]).push([[450],{21513:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});i(53297);var n=i(58258),s=i(47199),r=i(17562),o=i(75030),a=i(69694),h=i(24953),c=i(68309);const d=8e3;let l=0,m=0,u=window.innerWidth/2,p=window.innerHeight/2;class g{constructor(){this.scene=(0,a.H7)(),this.scene.background=new o.Q1f(855584),this.isChanging=!1,this.camera=(0,a.Gc)(new o.Pq0(0,0,80),55,5,2e4),this.renderer=(0,a.Ki)(),this.clock=(0,a.$i)(),this.timer=null,this._onPointerMove=this.onPointerMove.bind(this),document.body.addEventListener("pointermove",this._onPointerMove),this.initMeshes(),this.changeCameraView(),setTimeout((()=>{this.changeGeometry(this.qrGeometry.attributes.position.array,1600)}),1600),this._resizeFn=this.resizeFn.bind(this),window.addEventListener("resize",this._resizeFn),this.render(),console.log(this.camera.position,"this.camera.position")}onPointerMove(e){!1!==e.isPrimary&&(l=e.clientX-u,m=e.clientY-p)}getMod(e,t){return[Math.floor(e/t),e%t]}mixFloatArray(e,t){const i=Array.from(e),n=Array.from(t);if(i.length===n.length)return{...n};if(i.length<n.length)return{...n.splice(0,i.length)};if(i.length>n.length){const e=[],t=i.length-n.length,[s,r]=this.getMod(t,n.length);for(let i=0;i<s;i++)e.push(...n);return e.push(...n.slice(0,r)),{...n.concat(e)}}}changeGeometry(e,t=1500){const i=this.pt.geometry.attributes.position.array,n=this.mixFloatArray(i,e);this.isChanging=!0,new c.Ay.Tween({...Array.from(i)}).to(n,t).easing(c.Ay.Easing.Quadratic.InOut).onComplete((()=>{this.isChanging=!1})).onUpdate((e=>{for(let t in e){const i=e[t],n=Number(t);this.pt.geometry.attributes.position.array[n]=i}this.pt.geometry.attributes.position.needsUpdate=!0})).start()}changeCameraView(){new c.Ay.Tween({x:0,size:.2}).to({x:80,size:1.2},2400).onUpdate((e=>{const{x:t,size:i}=e,n=Math.sqrt(6400-Math.pow(t,2));this.camera.position.x=t,this.camera.position.z=n,this.camera.lookAt(new o.Pq0(0,0,0)),this.camera.updateProjectionMatrix(),this.pt.material.size=i})).start()}getRandomPos(e){const t=60,i=78,n=78,s=Math.random()*t*2-t,r=Math.random()*i*2-i,o=Math.sqrt((1-Math.pow(s,2)/t/t-Math.pow(r,2)/n/n)*n*n),a=Math.random()*o*2-o;return[a,s,r]}initMeshes(){const e=new o.LoY,t=[];for(let o=0;o<d;o++){const[e,i,n]=this.getRandomPos(o);t.push(e,i,n)}e.setAttribute("position",new o.qtW(t,3));const i=new o.Tap,n=i.load("/images/points-effect/gradient.png"),s=new o.BH$({color:3355443,size:.2,map:n,transparent:!0,depthTest:!1,blending:o.EZo}),r=new o.ONl(e,s);this.material=s,this.pt=r,this.scene.add(r);const a=new h.B;a.load("/models/points-effect/qr.glb",(e=>{const t=e.scene.children[0].geometry,i=22;t.scale(i,i,i).rotateX(.5*Math.PI).rotateY(.5*Math.PI).translate(0,0,-20),this.qrGeometry=t}))}resizeFn(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}render(){c.Ay.update(),this.renderer.render(this.scene,this.camera),this.timer=requestAnimationFrame(this.render.bind(this))}beforeDestroy(){window.removeEventListener("resize",this._resizeFn),this.timer&&cancelAnimationFrame(this.timer),document.body.removeEventListener("pointermove",this._onPointerMove)}}var w=i(91790);const v=e=>((0,n.Qi)("data-v-4615fefe"),e=e(),(0,n.jt)(),e),f={class:"about-page"},y=v((()=>(0,n.Lk)("div",{class:"about-box",id:"webgl-output"},null,-1))),b=v((()=>(0,n.Lk)("div",null,"这个人很懒，还没想好写什么！",-1))),M=v((()=>(0,n.Lk)("div",null,"不过可以先关注一下公众号二维码：",-1))),A=v((()=>(0,n.Lk)("div",null,"文章转载、商业合作、广告投放、问题咨询、前端开发等请加微信：corner_scofield",-1))),k=[b,M,A],z={name:"About"};var P=Object.assign(z,{setup(e){let t=null;const i=(0,r.KR)(!1),o=(0,w.rd)();(0,n.sV)((()=>{t=new g,setTimeout((()=>{i.value=!0}),3200)}));const a=()=>{o.push({name:"Home"})};return(0,n.xo)((()=>{t&&t.beforeDestroy()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",f,[y,(0,n.Lk)("div",{class:"home-btn",onClick:a}),(0,n.Lk)("div",{class:(0,s.C4)(["about-content",i.value?"show":""])},k,2)]))}}),C=i(69337);const L=(0,C.A)(P,[["__scopeId","data-v-4615fefe"]]);var _=L}}]);