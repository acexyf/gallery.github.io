"use strict";(self["webpackChunkcreation_gallery"]=self["webpackChunkcreation_gallery"]||[]).push([[243],{4272:function(e,t,n){n.d(t,{Z:function(){return h}});var s=n(1114),i=n(2606),r=n.n(i),o=n(4543),a=n(8353);const c={domId:"webgl-output",initPosition:new s.Pa4(20,10,10),fov:60,near:1,far:1e4,rendererOptions:{},clearColor:new s.Ilk(9737626),showStats:!1,helper:0,exposure:1,enableDamping:!0};class h{constructor(e){const t=c;(0,a.Kn)(e)&&Object.assign(t,e);const{fov:n,near:i,far:h,initPosition:d,rendererOptions:p={},clearColor:l,domId:m,showStats:u,helper:w,exposure:g,enableDamping:b}=t;this.scene=new s.xsS,this.camera=new s.cPb(n,window.innerWidth/window.innerHeight,i,h),this.camera.position.copy(d),this.camera.lookAt(this.scene.position);let x={antialias:!0};if((0,a.Kn)(p)&&(x=Object.assign({},x,p)),this.renderer=new s.CP7(x),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=s.ntZ,this.renderer.setClearColor(l),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.toneMapping=s.EoG,this.renderer.toneMappingExposure=g,this.renderer.physicallyCorrectLights=!0,this.renderer.setPixelRatio(window.devicePixelRatio),document.getElementById(m)?.append(this.renderer.domElement),this.orbitControls=new o.z(this.camera,this.renderer.domElement),this.orbitControls.enableDamping=b,this.clock=new s.SUY,(0,a.hj)(w)&&w>0&&this.scene.add(new s.y8_(w)),u){const e=new(r());this.stats=e,document.body.appendChild(e.dom)}}render(){this.orbitControls.update(),this.stats&&this.stats.update(),this.beforeRender&&this.beforeRender(),requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)}}},4674:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});n(7658);var s=n(3396),i=n(4272),r=n(1114);const o={id:"webgl-output"},a={name:"Panorama"};var c=Object.assign(a,{setup(e){class t extends i.Z{constructor(){super({initPosition:new r.Pa4(0,0,1),clearColor:new r.Ilk(0),fov:75,near:1,far:1e4});const e=["/images/panorama/cubemap/px.png","/images/panorama/cubemap/nx.png","/images/panorama/cubemap/py.png","/images/panorama/cubemap/ny.png","/images/panorama/cubemap/pz.png","/images/panorama/cubemap/nz.png"];this.list=[];const t=[],n=new r.dpR;e.map((e=>{const s=new r.vBJ({map:n.load(e)});t.push(s)}));var s=new r.DvJ(500,500,500),i=new r.Kj0(s,t);i.geometry.scale(-1,1,1),this.scene.add(i);const o=new r.xeV({map:n.load("/images/icon/position-fill.png")}),a=[{x:-5,y:-4,z:-14,content:"床"},{x:-20,y:-5,z:-9,content:"沙发"},{x:10,y:-6,z:12,content:"冰箱"}],c=(e,t,n,s)=>{const i=document.createElement("canvas");i.setAttribute("width","300px"),i.setAttribute("height","100px");const o=i.getContext("2d");o.fillStyle="#F4EA2A",o.font="40px Microsoft YaHei UI",o.lineWidth=4;const a=o.measureText(e);o.fillText(e,(i.width-a.width)/2,55);const c=new r.xEZ(i);c.needsUpdate=!0;const h=new r.xeV({map:c}),d=new r.jyi(h);return d.scale.set(6,2,1),d.position.set(t+3,n,s),console.log("sp",d,e,t,n+1,s),d};a.map((e=>{const{x:t,y:n,z:s,content:i}=e,a=new r.jyi(o);a.position.set(t,n,s),this.scene.add(a);const h=c(i,t,n,s);this.scene.add(h),this.list.push(a),this.list.push(h)})),this.raycaster=new r.iMs,this.mouse=new r.FM8,this._pointerMove=this.pointerMove.bind(this),this.renderer.domElement.addEventListener("mousemove",this._pointerMove),this.render()}pointerMove(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,console.log("mouse",this.mouse.x,this.mouse.y),this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.list);console.log("intersects.length",t.length),t.length&&console.log("intersects",t)}beforeRender(){this.labelRenderer&&this.labelRenderer.render(this.scene,this.camera)}}return(0,s.bv)((()=>{new t})),(e,t)=>((0,s.wg)(),(0,s.iD)("div",o))}}),h=n(89);const d=(0,h.Z)(c,[["__scopeId","data-v-a1051a44"]]);var p=d}}]);