"use strict";(self["webpackChunkcreation_gallery"]=self["webpackChunkcreation_gallery"]||[]).push([[450],{67828:function(t,e,n){n.r(e),n.d(e,{default:function(){return j}});n(53297);var i=n(58258),o=n(47199),s=n(17562),r=n(75030),a=n(69694),h=n(62780),c=n(24953),l=n(68309);const d=8e3,m=4e3,p=6e3;let u=0,g=0,w=window.innerWidth/2,y=window.innerHeight/2,f=null;const v=(0,h.fZ)();let b=.2,M=v?.8:1.2;class k{constructor(){f=document.querySelector(".about-content"),this.scene=(0,a.H7)(),this.scene.background=new r.Q1f(855584),this.isChanging=!1,this.camera=(0,a.Gc)(new r.Pq0(0,0,80),55,5,2e4),this.renderer=(0,a.Ki)(),this.type=0,this.clock=(0,a.$i)(),this.timer=null,this._onPointerMove=this.onPointerMove.bind(this),document.body.addEventListener("pointermove",this._onPointerMove),this.initMeshes((()=>{this.changeModel(),setInterval((()=>{this.changeModel()}),2*m+p)})),this._resizeFn=this.resizeFn.bind(this),window.addEventListener("resize",this._resizeFn),this.render()}onPointerMove(t){!1!==t.isPrimary&&(u=t.clientX-w,g=t.clientY-y)}changeModel(){this.changeCameraView(0,m),setTimeout((()=>{this.changeGeometry(this.qrGeometry.attributes.position.array,1500,(()=>{this.toggleShowTextContent()}))}),3e3),this.type=1,setTimeout((()=>{this.toggleShowTextContent(),this.changeCameraView(1,m),this.changeGeometry(this.randomGeometry.attributes.position.array,1500),this.type=0}),m+p)}getMod(t,e){return[Math.floor(t/e),t%e]}mixFloatArray(t,e){const n=Array.from(t),i=Array.from(e);if(n.length===i.length)return{...i};if(n.length<i.length)return{...i.splice(0,n.length)};if(n.length>i.length){const t=[],e=n.length-i.length,[o,s]=this.getMod(e,i.length);for(let n=0;n<o;n++)t.push(...i);return t.push(...i.slice(0,s)),{...i.concat(t)}}}changeGeometry(t,e=1500,n){const i=this.pt.geometry.attributes.position.array,o=this.mixFloatArray(i,t);new l.Ay.Tween({...Array.from(i)}).to(o,e).easing(l.Ay.Easing.Quadratic.InOut).onComplete((()=>{"function"===typeof n&&n()})).onUpdate((t=>{for(let e in t){const n=t[e],i=Number(e);this.pt.geometry.attributes.position.array[i]=n}this.pt.geometry.attributes.position.needsUpdate=!0})).start()}changeCameraView(t,e=2400,n){0===t?new l.Ay.Tween({x:-80,size:b}).to({x:80,size:M},e).onComplete((()=>{"function"===typeof n&&n()})).onUpdate((t=>{const{x:e,size:n}=t,i=Math.sqrt(6400-Math.pow(e,2));this.camera.position.x=e,this.camera.position.z=i,this.camera.lookAt(new r.Pq0(0,0,0)),this.camera.updateProjectionMatrix(),this.pt.material.size=n})).start():1===t&&new l.Ay.Tween({x:80,size:M}).to({x:-80,size:b},e).onComplete((()=>{"function"===typeof n&&n()})).onUpdate((t=>{const{x:e,size:n}=t,i=-1*Math.sqrt(6400-Math.pow(e,2));this.camera.position.x=e,this.camera.position.z=i,this.camera.lookAt(new r.Pq0(0,0,0)),this.camera.updateProjectionMatrix(),this.pt.material.size=n})).start()}getRandomPos(t){const e=60,n=78,i=78,o=Math.random()*e*2-e,s=Math.sqrt((1-(o/e)**2)*n**2),r=Math.random()*s*2-s,a=Math.sqrt((1-Math.pow(o,2)/e/e-Math.pow(r,2)/i/i)*i*i),h=Math.random()*a*2-a;return[h,o,r]}initMeshes(t){const e=new r.LoY,n=[];for(let r=0;r<d;r++){const[t,e,i]=this.getRandomPos(r);n.push(t,e,i)}e.setAttribute("position",new r.qtW(n,3)),this.randomGeometry=e;const i=new r.Tap,o=i.load("/images/points-effect/gradient.png"),s=new r.BH$({color:3355443,size:b,map:o,transparent:!0,depthTest:!1,blending:r.EZo}),a=new r.ONl(e.clone(),s);this.material=s,this.pt=a,this.scene.add(a);const h=new c.B;h.load("/models/points-effect/qr.glb",(e=>{const n=e.scene.children[0].geometry;if(v){const t=15;n.scale(t,t,t).rotateX(.5*Math.PI).rotateY(.5*Math.PI).translate(0,-5,0)}else{const t=22;n.scale(t,t,t).rotateX(.5*Math.PI).rotateY(.5*Math.PI).translate(0,0,-20)}this.qrGeometry=n,"function"===typeof t&&t()}))}resizeFn(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}render(){l.Ay.update(),this.renderer.render(this.scene,this.camera),this.timer=requestAnimationFrame(this.render.bind(this))}beforeDestroy(){window.removeEventListener("resize",this._resizeFn),this.timer&&cancelAnimationFrame(this.timer),document.body.removeEventListener("pointermove",this._onPointerMove)}toggleShowTextContent(){const t="show";(0,h.nB)(f,t)?(0,h.vy)(f,"show"):(0,h.iQ)(f,"show")}}var x=n(91790);const z=t=>((0,i.Qi)("data-v-1d79df08"),t=t(),(0,i.jt)(),t),P={class:"about-page"},A=z((()=>(0,i.Lk)("div",{class:"about-box",id:"webgl-output"},null,-1))),C=z((()=>(0,i.Lk)("div",null,"这个人很懒，还没想好写什么！",-1))),L=z((()=>(0,i.Lk)("div",null,"不过可以先关注一下公众号二维码。",-1))),q=z((()=>(0,i.Lk)("div",null,"文章转载、商业合作、广告投放、问题咨询、前端开发等",-1))),_=z((()=>(0,i.Lk)("div",null,"请加微信：corner_scofield",-1))),T=[C,L,q,_],F=z((()=>(0,i.Lk)("div",{class:"footer"},[(0,i.Lk)("div",{class:"footer-box"},[(0,i.Lk)("span",{class:"link"},"谢小飞 版权所有 "),(0,i.Lk)("a",{href:"https://beian.miit.gov.cn/#/Integrated/index",target:"_blank",class:"link"}," 苏ICP备19064103号-1 ")])],-1))),I={name:"About"};var G=Object.assign(I,{setup(t){let e=null;const n=(0,s.KR)((0,h.fZ)()),r=(0,x.rd)();(0,i.sV)((()=>{e=new k}));const a=()=>{r.push({name:"Home"})};return(0,i.xo)((()=>{e&&e.beforeDestroy()})),(t,e)=>((0,i.uX)(),(0,i.CE)("div",P,[A,(0,i.Lk)("div",{class:"home-btn",onClick:a}),(0,i.Lk)("div",{class:(0,o.C4)(["about-content",n.value?"mobile":""])},T,2),F]))}}),E=n(69337);const H=(0,E.A)(G,[["__scopeId","data-v-1d79df08"]]);var j=H}}]);