"use strict";(self["webpackChunkcreation_gallery"]=self["webpackChunkcreation_gallery"]||[]).push([[228],{57399:function(e,t,r){r.d(t,{Z:function(){return n}});r(53297),r(75898),r(66653),r(91242),r(26057),r(55624),r(39820),r(83202),r(77425),r(62228);var o=r(75030);const s=new WeakMap;class n extends o.aHM{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,s){const n=new o.Y9S(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,(e=>{this.decodeDracoFile(e,t).catch(s)}),r,s)}decodeDracoFile(e,t,r,o){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){const r=JSON.stringify(t);if(s.has(e)){const t=s.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const n=this.workerNextTaskID++,a=e.byteLength,i=this._getWorker(n,a).then((r=>(o=r,new Promise(((r,s)=>{o._callbacks[n]={resolve:r,reject:s},o.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return i.catch((()=>!0)).then((()=>{o&&n&&this._releaseTask(o,n)})),s.set(e,{key:r,promise:i}),i}_createGeometry(e){const t=new o.LoY;e.index&&t.setIndex(new o.THS(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r],n=s.name,a=s.array,i=s.itemSize;t.setAttribute(n,new o.THS(a,i))}return t}_loadLibrary(e,t){const r=new o.Y9S(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,o)=>{r.load(e,t,void 0,o)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const o=a.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function a(){let e,t;function r(e,t,r,n){const a=n.attributeIDs,i=n.attributeTypes;let c,d;const l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)c=new e.Mesh,d=t.DecodeBufferToMesh(r,c);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");c=new e.PointCloud,d=t.DecodeBufferToPointCloud(r,c)}if(!d.ok()||0===c.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const u={index:null,attributes:[]};for(const o in a){const r=self[i[o]];let d,l;if(n.useUniqueIDs)l=a[o],d=t.GetAttributeByUniqueId(c,l);else{if(l=t.GetAttributeId(c,e[a[o]]),-1===l)continue;d=t.GetAttribute(c,l)}u.attributes.push(s(e,t,c,o,r,d))}return l===e.TRIANGULAR_MESH&&(u.index=o(e,t,c)),e.destroy(c),u}function o(e,t,r){const o=r.num_faces(),s=3*o,n=4*s,a=e._malloc(n);t.GetTrianglesUInt32Array(r,n,a);const i=new Uint32Array(e.HEAPF32.buffer,a,s).slice();return e._free(a),{array:i,itemSize:1}}function s(e,t,r,o,s,a){const i=a.num_components(),c=r.num_points(),d=c*i,l=d*s.BYTES_PER_ELEMENT,u=n(e,s),h=e._malloc(l);t.GetAttributeDataArrayForAllPoints(r,a,u,l,h);const f=new s(e.HEAPF32.buffer,h,d).slice();return e._free(h),{name:o,array:f,itemSize:i}}function n(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}onmessage=function(o){const s=o.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const o=s.buffer,n=s.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder,i=new t.DecoderBuffer;i.Init(new Int8Array(o),o.byteLength);try{const e=r(t,a,i,n),o=e.attributes.map((e=>e.array.buffer));e.index&&o.push(e.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:e},o)}catch(c){console.error(c),self.postMessage({type:"error",id:s.id,error:c.message})}finally{t.destroy(i),t.destroy(a)}}));break}}}},45494:function(e,t,r){r.d(t,{Y:function(){return s}});r(75898),r(66653),r(91242),r(26057),r(55624),r(39820);var o=r(75030);class s extends o.BRH{constructor(e){super(e),this.type=o.ix0}parse(e){const t=-1,r=1,s=2,n=3,a=4,i=function(e,o){switch(e){case r:console.error("THREE.RGBELoader Read Error: "+(o||""));break;case s:console.error("THREE.RGBELoader Write Error: "+(o||""));break;case n:console.error("THREE.RGBELoader Bad File Format: "+(o||""));break;default:case a:console.error("THREE.RGBELoader: Error: "+(o||""))}return t},c=1,d=2,l=4,u="\n",h=function(e,t,r){const o=128;t=t||1024;let s=e.pos,n=-1,a=0,i="",c=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+o)));while(0>(n=c.indexOf(u))&&a<t&&s<e.byteLength)i+=c,a+=c.length,s+=o,c+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+o)));return-1<n&&(!1!==r&&(e.pos+=a+n+1),i+c.slice(0,n))},f=function(e){const t=/^#\?(\S+)/,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,f={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let y,p;if(e.pos>=e.byteLength||!(y=h(e)))return i(r,"no header found");if(!(p=y.match(t)))return i(n,"bad initial token");f.valid|=c,f.programtype=p[1],f.string+=y+"\n";while(1){if(y=h(e),!1===y)break;if(f.string+=y+"\n","#"!==y.charAt(0)){if((p=y.match(o))&&(f.gamma=parseFloat(p[1])),(p=y.match(s))&&(f.exposure=parseFloat(p[1])),(p=y.match(a))&&(f.valid|=d,f.format=p[1]),(p=y.match(u))&&(f.valid|=l,f.height=parseInt(p[1],10),f.width=parseInt(p[2],10)),f.valid&d&&f.valid&l)break}else f.comments+=y+"\n"}return f.valid&d?f.valid&l?f:i(n,"missing image size specifier"):i(n,"missing format specifier")},y=function(e,t,o){const s=t;if(s<8||s>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(s!==(e[2]<<8|e[3]))return i(n,"wrong scanline width");const c=new Uint8Array(4*t*o);if(!c.length)return i(a,"unable to allocate buffer space");let d=0,l=0;const u=4*s,h=new Uint8Array(4),f=new Uint8Array(u);let y=o;while(y>0&&l<e.byteLength){if(l+4>e.byteLength)return i(r);if(h[0]=e[l++],h[1]=e[l++],h[2]=e[l++],h[3]=e[l++],2!=h[0]||2!=h[1]||(h[2]<<8|h[3])!=s)return i(n,"bad rgbe scanline format");let t,o=0;while(o<u&&l<e.byteLength){t=e[l++];const r=t>128;if(r&&(t-=128),0===t||o+t>u)return i(n,"bad scanline data");if(r){const r=e[l++];for(let e=0;e<t;e++)f[o++]=r}else f.set(e.subarray(l,l+t),o),o+=t,l+=t}const a=s;for(let e=0;e<a;e++){let t=0;c[d]=f[e+t],t+=s,c[d+1]=f[e+t],t+=s,c[d+2]=f[e+t],t+=s,c[d+3]=f[e+t],d+=4}y--}return c},p=function(e,t,r,o){const s=e[t+3],n=Math.pow(2,s-128)/255;r[o+0]=e[t+0]*n,r[o+1]=e[t+1]*n,r[o+2]=e[t+2]*n,r[o+3]=1},g=function(e,t,r,s){const n=e[t+3],a=Math.pow(2,n-128)/255;r[s+0]=o.GxU.toHalfFloat(Math.min(e[t+0]*a,65504)),r[s+1]=o.GxU.toHalfFloat(Math.min(e[t+1]*a,65504)),r[s+2]=o.GxU.toHalfFloat(Math.min(e[t+2]*a,65504)),r[s+3]=o.GxU.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const m=f(w);if(t!==m){const e=m.width,r=m.height,s=y(w.subarray(w.pos),e,r);if(t!==s){let t,n,a;switch(this.type){case o.RQf:a=s.length/4;const e=new Float32Array(4*a);for(let t=0;t<a;t++)p(s,4*t,e,4*t);t=e,n=o.RQf;break;case o.ix0:a=s.length/4;const r=new Uint16Array(4*a);for(let t=0;t<a;t++)g(s,4*t,r,4*t);t=r,n=o.ix0;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:e,height:r,data:t,header:m.string,gamma:m.gamma,exposure:m.exposure,type:n}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,s){function n(e,r){switch(e.type){case o.RQf:case o.ix0:e.encoding=o.tgE,e.minFilter=o.k6q,e.magFilter=o.k6q,e.generateMipmaps=!1,e.flipY=!0;break}t&&t(e,r)}return super.load(e,n,r,s)}}}}]);