"use strict";(self["webpackChunkcreation_gallery"]=self["webpackChunkcreation_gallery"]||[]).push([[31],{86547:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=a(58258),i=a(17562),r=a(34056),h=a(63019),o=a(69694),n=a(64634),l=a(75030),d=a(37949);class p{constructor(e){const{progress:t=n.lQ,complete:a=n.lQ,begin:s=n.lQ}=e;this.isAutoRotate=!1,this.scene=(0,o.H7)(),this.scene.background=new l.Q1f(16777215),this.camera=(0,o.Gc)(new l.Pq0(26,26,26),55,1,2e4),this.initGui(),this.renderer=(0,o.Ki)(void 0,!0,2),this.renderer.setClearColor(16777215),this.renderer.autoClear=!1,this.controls=(0,o.ZN)(this.camera,this.renderer,!1),this.clock=(0,o.$i)();const i=new l.KPJ;this.objLoader=new d.L(i),this.imgLoader=new l.$NF(i),this.cubeLoader=new l.ScU(i),i.onStart=()=>{s()},i.onProgress=(e,a,s)=>{t((0,n.tM)(a,s))},i.onLoad=()=>{a()},this.initLight(),this.loadAssets(),this._resizeFn=this.resizeFn.bind(this),window.addEventListener("resize",this._resizeFn),this.render()}initGui(){const e=this;this.gui=(0,o._f)();const t={White(){e.imgLoader.load("/models/armless-chair/leather_white.jpg",(t=>{e.leatherTexture.image=t,e.leatherTexture.needsUpdate=!0,e.leatherTexture.wrapS=e.leatherTexture.wrapT=l.GJx,e.leatherTexture.repeat.set(5,5)}))},Black(){e.imgLoader.load("/models/armless-chair/leather_black.jpg",(t=>{e.leatherTexture.image=t,e.leatherTexture.needsUpdate=!0,e.leatherTexture.wrapS=e.leatherTexture.wrapT=l.GJx,e.leatherTexture.repeat.set(5,5)}))}},a=this.gui.addFolder("皮革颜色");a.add(t,"White"),a.add(t,"Black")}initLight(){const e=new l.$p8(2236962);this.scene.add(e);const t=new l.nCl(11184810);t.position.set(-30,30,30),t.castShadow=!0,t.distance=100,t.angle=.2*Math.PI,t.shadow.mapSize.width=1028,t.shadow.mapSize.height=1028,this.scene.add(t)}loadAssets(){this.envMap=this.cubeLoader.load(["/models/backrest-chair/posx.jpg","/models/backrest-chair/negx.jpg","/models/backrest-chair/posy.jpg","/models/backrest-chair/negy.jpg","/models/backrest-chair/posz.jpg","/models/backrest-chair/negz.jpg"]),this.leatherTexture=new l.gPd,this.leatherBump=new l.gPd,this.backrestLightMap=new l.gPd,this.cushionLightMap=new l.gPd,this.beltLightMap=new l.gPd,this.buttonLightMap=new l.gPd,this.group=new l.B69,this.imgLoader.load("/models/armless-chair/leather_white.jpg",(e=>{this.leatherTexture.image=e,this.leatherTexture.needsUpdate=!0,this.leatherTexture.wrapS=this.leatherTexture.wrapT=l.GJx,this.leatherTexture.repeat.set(5,5)})),this.imgLoader.load("/models/armless-chair/leather_bump.jpg",(e=>{this.leatherBump.image=e,this.leatherBump.needsUpdate=!0,this.leatherBump.wrapS=this.leatherBump.wrapT=l.GJx,this.leatherBump.repeat.set(5,5)})),this.imgLoader.load("/models/armless-chair/backrestLightMap.jpg",(e=>{this.backrestLightMap.image=e,this.backrestLightMap.needsUpdate=!0})),this.imgLoader.load("/models/armless-chair/cushionLightMap.jpg",(e=>{this.cushionLightMap.image=e,this.cushionLightMap.needsUpdate=!0})),this.imgLoader.load("/models/armless-chair/beltLightMap.jpg",(e=>{this.beltLightMap.image=e,this.beltLightMap.needsUpdate=!0})),this.imgLoader.load("/models/armless-chair/buttonLightMap.jpg",(e=>{this.buttonLightMap.image=e,this.buttonLightMap.needsUpdate=!0})),this.objLoader.load("/models/armless-chair/barcelona-backrest.obj",(e=>{e.traverse((e=>{e instanceof l.eaF&&(e.material=new l._4j({map:this.leatherTexture,roughness:.8,metalness:.05,bumpMap:this.leatherBump,bumpScale:.02,lightMap:this.backrestLightMap,lightMapIntensity:.75,blending:l.NTi,side:l.$EB,envMap:this.envMap}),e.receiveShadow=!0,e.castShadow=!0)})),e.position.y=-12,this.group.add(e)})),this.objLoader.load("/models/armless-chair/barcelona-cushion.obj",(e=>{e.traverse((e=>{e instanceof l.eaF&&(e.material=new l._4j({map:this.leatherTexture,roughness:.8,metalness:.05,bumpMap:this.leatherBump,bumpScale:.02,lightMap:this.cushionLightMap,lightMapIntensity:.75,blending:l.NTi,side:l.$EB,envMap:this.envMap}),e.receiveShadow=!0,e.castShadow=!0)})),e.position.y=-12,this.group.add(e)})),this.objLoader.load("/models/armless-chair/barcelona-belt01.obj",(e=>{e.traverse((e=>{e instanceof l.eaF&&(e.material=new l._4j({map:this.leatherTexture,roughness:.8,metalness:.05,bumpMap:this.leatherBump,bumpScale:.02,lightMap:this.beltLightMap,lightMapIntensity:.75,blending:l.NTi,side:l.$EB,envMap:this.envMap}),e.receiveShadow=!0,e.castShadow=!0)})),e.position.y=-12;let t=[-3,-5.9,-8.8,-11.7,3,5.9,8.8,11.7];for(let a=0;a<t.length;a++){const s=t[a],i=e.clone();i.position.x=s,this.group.add(i)}})),this.objLoader.load("/models/armless-chair/barcelona-dot.obj",(e=>{e.traverse((e=>{e instanceof l.eaF&&(e.material=new l._4j({map:this.leatherTexture,roughness:.9,metalness:.05,bumpMap:this.leatherBump,bumpScale:.05,lightMap:this.buttonLightMap,lightMapIntensity:.75,blending:l.NTi,side:l.$EB,envMap:this.envMap}),e.receiveShadow=!0,e.castShadow=!0)})),e.position.y=-12,this.group.add(e)})),this.objLoader.load("/models/armless-chair/barcelona-frame.obj",(e=>{e.traverse((e=>{e instanceof l.eaF&&(e.material=new l._4j({roughness:.2,metalness:.8,blending:l.NTi,envMap:this.envMap,side:l.$EB}),e.receiveShadow=!0,e.castShadow=!0)})),e.position.y=-12,this.group.add(e)})),this.scene.add(this.group)}autoRotate(){this.isAutoRotate=!this.isAutoRotate,this.controls.autoRotate=this.isAutoRotate}resizeFn(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}render(){this.renderer.render(this.scene,this.camera),this.controls.update(),this.timer=requestAnimationFrame(this.render.bind(this))}beforeDestroy(){this.timer&&cancelAnimationFrame(this.timer),this.gui.destroy(),window.addEventListener("resize",this._resizeFn)}}const c={class:"relative"},g=(0,s.Lk)("div",{id:"webgl-output",class:"webgl-output"},null,-1),u={name:"ArmlessChair"};var m=Object.assign(u,{setup(e){let t=null;const a=(0,i.KR)(!0),o=(0,i.KR)(0);(0,s.sV)((()=>{t=new p({begin(){a.value=!0},progress(e){o.value=e},complete(){a.value=!1}})})),(0,s.xo)((()=>{t&&t.beforeDestroy()}));const n=()=>{t&&t.autoRotate()};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",c,[g,a.value?((0,s.uX)(),(0,s.Wv)((0,i.R1)(r.I),{key:0,progress:o.value},null,8,["progress"])):(0,s.Q3)("",!0),(0,s.bF)((0,i.R1)(h.mQ),null,{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(h.yB),{class:"mr-4",onClick:n}),(0,s.bF)((0,i.R1)(h.oZ))])),_:1})]))}});const b=m;var w=b}}]);